{
  "name": "argo",
  "version": "0.4.7",
  "description": "An extensible, asynchronous HTTP reverse proxy and origin server.",
  "main": "argo.js",
  "directories": {
    "example": "example"
  },
  "license": "MIT",
  "scripts": {
    "test": "node_modules/.bin/mocha -R spec",
    "coverage": "bin/_coverage"
  },
  "repository": {
    "type": "git",
    "url": "git://github.com/argo/argo.git"
  },
  "author": {
    "name": "Kevin Swiber",
    "email": "kswiber@gmail.com"
  },
  "readmeFilename": "README.md",
  "devDependencies": {
    "mocha": "~1.8.1"
  },
  "dependencies": {
    "pipeworks": "1.2.x"
  },
  "contributors": [
    {
      "name": "Kevin Swiber",
      "email": "kswiber@gmail.com"
    },
    {
      "name": "Matthew Dobson",
      "email": "mdobson4@gmail.com"
    },
    {
      "name": "Greg Brail",
      "email": "greg@apigee.com"
    }
  ],
  "readme": "# Argo\n\nAn extensible, asynchronous HTTP reverse proxy and origin server.\n\n<!-- Argo is:\n\n* An API-focused HTTP server.\n* A reverse proxy to manage and modify HTTP requests and responses.\n* Modular using handlers for request and response pipelines.\n* Extensible using a package system.\n\nAs an API server:\n\n* Route requests to handlers.\n* Separate resources into modules.\n\nAs a reverse proxy:\n\n* Route requests to backend servers.\n* Transform HTTP messages on the fly.\n* Add OAuth 2.0 support to an existing API.\n* Create a RESTful API faÃ§ade over legacy systems.\n-->\n\n## Examples\n\n### Adding Cross-Origin Resource Sharing\n\nSetup the server:\n\n```javascript\nvar argo = require('argo');\n\nargo()\n  .use(function(handle) {\n    handle('response', function(env, next) {\n      env.response.setHeader('Access-Control-Allow-Origin', '*');\n      next(env);\n    });\n  })\n  .target('http://weather.yahooapis.com')\n  .listen(1337);\n```\n\nMake a request:\n\n```bash\n$ curl -i http://localhost:1337/forecastrss?w=2467861\n\nHTTP/1.1 200 OK\nDate: Thu, 28 Feb 2013 20:55:03 GMT\nContent-Type: text/xml;charset=UTF-8\nConnection: keep-alive\nServer: YTS/1.20.13\nAccess-Control-Allow-Origin: *\nContent-Length: 2337\n\n<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\" ?>\n<GiantXMLResponse/>\n```\n\n### Serving an API Response \n\nSetup the server: \n\n```javascript\nvar argo = require('argo');\n\nargo()\n  .get('^/dogs$', function(handle) {\n    handle('request', function(env, next) {\n      env.response.statusCode = 200;\n      env.response.body = { dogs: ['Alfred', 'Rover', 'Dino'] };\n      next(env);\n    });\n  })\n  .listen(1337);\n```\n\nMake a request:\n\n```bash\n$ curl -i http://localhost:1337/dogs\n\nHTTP/1.1 200 OK\nContent-Type: application/json\nContent-Length: 34 \nDate: Thu, 28 Feb 2013 20:44:46 GMT\nConnection: keep-alive\n\n{\"dogs\":[\"Alfred\",\"Rover\",\"Dino\"]}\n```\n\n## Install\n\n```bash\n$ npm install argo\n```\n\n## Documentation\n\n* [handleFunction](#handleFunction)\n* [use(handleFunction)](#usehandle)\n* [use(package)](#usepackage)\n* [target](#target)\n* [route](#route)\n* [get](#get)\n* [post](#post)\n* [put](#put)\n* [del](#del)\n* [options](#options)\n* [trace](#trace)\n* [map](#map)\n* [include](#include)\n* [listen](#listen)\n* [Error Handling](#error-handling)\n\n\n## Usage\n\n<a name=\"handleFunction\"/>\n### handleFunction(type, [options], callback)\n\n* `type`: `'request'` or `'response'`\n\n* `options`: Mostly used for internal purposes.  Optional.\n\n* `callback(env, next)`: A request or response callback. `env` is an environment context that is passed to every handler, and `next` is a reference to the next function in the pipeline.\n\nWhen the handler is complete and wishes to pass to the next function in the pipeline, it must call `next(env)`.\n\n<a name=\"usehandle\"/>\n### use(handleFunction)\n\n`handleFunction` is used to set up request and response handlers.  \n\n```javascript\nargo()\n  //For every request add 'X-Custom-Header' with value 'Yippee!'\n  .use(function(handle) {\n    handle('request', function(env, next) {\n      env.request.headers['X-Custom-Header'] = 'Yippee!';\n      next(env);\n    });\n  })\n```\n<a name=\"usepackage\"/>\n### use(package)\n\nAlias for `include(package)`.\n\n<a name=\"target\"/>\n### target(uri)\n\n`target` is used for proxying requests to a backend server.\n\n* `uri`: a string pointing to the target URI.\n\nExample:\n\n```javascript\nargo()\n  .target('http://weather.yahooapis.com')\n```\n<a name=\"route\"/>\n### route(path, [options], handleFunction)\n\n* `path`: a regular expression used to match HTTP Request URI path.\n\n* `options`: an object with a `methods` property to filter HTTP methods (e.g., `{ methods: ['GET','POST'] }`).  Optional.\n\n* `handleFunction`: Same as in `use`.\n\nExample:\n\n```javascript\nargo()\n  .route('^/greeting$', function(handle) {\n    handle('request', function(env, next) {\n      env.response.statusCode = 200;\n      env.response.headers = { 'Content-Type': 'text/plain' };\n      env.response.body = 'Hello World!';\n \n      next(env);\n    });\n  })\n```\n<a name=\"get\"/>\n<a name=\"post\"/>\n<a name=\"put\"/>\n<a name=\"del\"/>\n<a name=\"options\"/>\n<a name=\"trace\"/>\n### get(path, handleFunction)\n### post(path, handleFunction)\n### put(path, handleFunction)\n### del(path, handleFunction)\n### options(path, handleFunction)\n### trace(path, handleFunction)\n\nMethod filters built on top of `route`.\n\nExample:\n\n```javascript\nargo()\n  .get('^/puppies$', function(handle) {\n    handle('request', function(env, next) {\n      env.response.body = JSON.stringify([{name: 'Sparky', breed: 'Fox Terrier' }]);\n      next(env);\n    });\n  })\n```\n<a name=\"map\"/>\n### map(path, [options], argoSegmentFunction)\n\n`map` is used to delegate control to sub-Argo instances based on a request URI path.\n\n* `path`: a regular expression used to match the HTTP Request URI path.\n\n* `options`: an object with a `methods` property to filter HTTP methods (e.g., `{ methods: ['GET','POST'] }`).  Optional.\n\n* `argoSegmentFunction`: a function that is passed an instance of `argo` for additional setup.\n\nExample:\n\n```javascript\nargo()\n  .map('^/payments', function(server) {\n    server\n      .use(oauth)\n      .target('http://backend_payment_server');\n  })\n```\n<a name=\"include\"/>\n### include(package)\n\n* `package`: An object that contains a `package` property.\n\nThe `package` property is a function that takes an argo instance as a paramter and returns an object that contains a `name` and an `install` function.\n\nExample:\n\n```javascript\nvar superPackage = function(argo) {\n  return {\n    name: 'Super Package',\n    install: function() {\n      argo\n        .use(oauth)\n        .route('^/super$', require('./super'));\n    }\n  };\n};\n\nargo()\n  .include({ package: superPackage})\n```\n<a name=\"listen\"/>\n### listen(port)\n\n* `port`: A port on which the server should listen.\n\n<a name=\"error-handling\"/>\n### Error Handling\n\nArgo allows a special `error` handler for capturing state when an uncaught exception occurs.\n\n```javascript\nargo()\n  .use(function(handle) {\n    handle('error', function(env, error, next) {\n      console.log(error.message);\n      env.response.statusCode = 500;\n      env.response.body = 'Internal Server Error';\n      next(env);\n      process.exit();\n    });\n  })\n  .get('^/$', function(handle) {\n    handle('request', function(env, next) {\n      env.response.body = 'Hello World!';\n      next(env);\n    });\n  })\n  .get('^/explode$', function(handle) {\n    handle('request', function(env, next) {\n      setImmediate(function() { throw new Error('Ahoy!'); });\n    });\n  })\n  .listen(3000);\n```\n\nUnlike other named pipelines, there should be only one error handler assigned to an Argo server. It is recommended to exit the process once an error has been handled. This feature uses [domains](http://nodejs.org/api/domain.html).\n\nSee [`cluster.js`](https://github.com/argo/argo/blob/master/example/cluster.js) for an example of using error handling to restart workers in a cluster.\n\n## Tests\n\nUnit tests: \n\n```bash\n$ npm test\n```\n\nTest Coverage:\n\n```bash\n$ npm run-script coverage\n```\n\n## License\nMIT\n",
  "bugs": {
    "url": "https://github.com/argo/argo/issues"
  },
  "homepage": "https://github.com/argo/argo",
  "_id": "argo@0.4.7",
  "dist": {
    "shasum": "149c740990e384d58cc1a66ef04058106c4d4c14"
  },
  "_from": "argo@",
  "_resolved": "https://registry.npmjs.org/argo/-/argo-0.4.7.tgz"
}
